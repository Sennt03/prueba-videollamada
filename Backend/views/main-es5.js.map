{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///node_modules/peerjs/dist sync","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/call.service.ts","webpack:///src/app/dialog/callinfo-dialog.component.ts","webpack:///src/app/dialog/callinfo-dialog.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","webpackEmptyContext","routes","AppRoutingModule","forRoot","imports","AppComponent","dialog","callService","isCallStarted$","peerId","initPeer","localStream$","pipe","res","subscribe","stream","localVideo","nativeElement","srcObject","remoteStream$","remoteVideo","destroyPeer","joinCall","dialogData","dialogRef","open","width","data","afterClosed","establishMediaCall","enableCallAnswer","_","closeMediaCall","showModal","endCall","selector","templateUrl","styleUrls","AppModule","declarations","providers","bootstrap","CallService","snackBar","localStreamBs","asObservable","remoteStreamBs","isCallStartedBs","peer","disconnected","peerJsOptions","debug","config","iceServers","urls","error","console","remotePeerId","navigator","mediaDevices","getUserMedia","video","audio","connection","connect","on","err","mediaCall","call","errorMessage","next","remoteStream","onCallClose","answer","value","getTracks","forEach","track","stop","close","disconnect","destroy","CallInfoDialogComponents","_snackBar","duration","horizontalPosition","verticalPosition","showCopiedSnackBar","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"./node_modules/peerjs/dist sync recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Observable, of } from 'rxjs';\nimport { filter, switchMap } from 'rxjs/operators';\nimport { CallService } from './call.service';\nimport { CallInfoDialogComponents, DialogData } from './dialog/callinfo-dialog.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  public isCallStarted$: Observable<boolean>;\n  private peerId: string;\n\n  @ViewChild('localVideo') localVideo: ElementRef<HTMLVideoElement>;\n  @ViewChild('remoteVideo') remoteVideo: ElementRef<HTMLVideoElement>;\n\n  constructor(public dialog: MatDialog, private callService: CallService) {\n    this.isCallStarted$ = this.callService.isCallStarted$;\n    this.peerId = this.callService.initPeer();\n  }\n  \n  ngOnInit(): void {\n    this.callService.localStream$\n      .pipe(filter(res => !!res))\n      .subscribe(stream => this.localVideo.nativeElement.srcObject = stream)\n    this.callService.remoteStream$\n      .pipe(filter(res => !!res))\n      .subscribe(stream => this.remoteVideo.nativeElement.srcObject = stream)\n  }\n  \n  ngOnDestroy(): void {\n    this.callService.destroyPeer();\n  }\n\n  public showModal(joinCall: boolean): void {\n    let dialogData: DialogData = joinCall ? ({ peerId: null, joinCall: true }) : ({ peerId: this.peerId, joinCall: false });\n    const dialogRef = this.dialog.open(CallInfoDialogComponents, {\n      width: '250px',\n      data: dialogData\n    });\n\n    dialogRef.afterClosed()\n      .pipe(\n        switchMap(peerId => \n          joinCall ? of(this.callService.establishMediaCall(peerId)) : of(this.callService.enableCallAnswer())\n        ),\n      )\n      .subscribe(_  => { });\n  }\n\n  public endCall() {\n    this.callService.closeMediaCall();\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"row p-2\">\n    <button mat-raised-button color=\"primary\" class=\"m-2\" [disabled]=\"isCallStarted$ | async\" (click)=\"showModal(false)\">Start Call</button>\n    <button mat-raised-button class=\"m-2\" [disabled]=\"isCallStarted$ | async\" (click)=\"showModal(true)\">Join Call</button>\n    <button mat-raised-button color=\"warn\" class=\"m-2\" [disabled]=\"!(isCallStarted$ | async)\" (click)=\"endCall()\">End Call</button>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-center\">\n      <div id=\"video-wrapper\">\n        <video #remoteVideo id=\"remote-video\" poster=\"./assets/video-placeholder.jpg\" autoplay playsinline></video>\n        <video #localVideo id=\"local-video\" autoplay playsinline [muted]=true></video>\n      </div>\n    </div>\n  </div>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatButtonModule } from '@angular/material/button'\nimport { CallInfoDialogComponents } from './dialog/callinfo-dialog.component';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from \"@angular/material/form-field\"\nimport { MatInputModule } from \"@angular/material/input\"\nimport { FormsModule } from '@angular/forms';\nimport { ClipboardModule } from '@angular/cdk/clipboard';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { CallService } from './call.service';\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    CallInfoDialogComponents\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    BrowserAnimationsModule,\n    MatButtonModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatInputModule,\n    ClipboardModule,\n    MatSnackBarModule\n  ],\n  providers: [\n    CallService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport Peer from 'peerjs';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { v4 as uuidv4 } from 'uuid';\n\n\n@Injectable()\nexport class CallService {\n\n    private peer: Peer;\n    private mediaCall: Peer.MediaConnection;\n  \n    private localStreamBs: BehaviorSubject<MediaStream> = new BehaviorSubject(null);\n    public localStream$ = this.localStreamBs.asObservable();\n    private remoteStreamBs: BehaviorSubject<MediaStream> = new BehaviorSubject(null);\n    public remoteStream$ = this.remoteStreamBs.asObservable();\n\n    private isCallStartedBs = new Subject<boolean>();\n    public isCallStarted$ = this.isCallStartedBs.asObservable();\n\n    constructor(private snackBar: MatSnackBar) { }\n\n    public initPeer(): string {\n        if (!this.peer || this.peer.disconnected) {\n            const peerJsOptions: Peer.PeerJSOption = {\n                debug: 3,\n                config: {\n                    iceServers: [\n                        {\n                            urls: [\n                                'stun:stun1.l.google.com:19302',\n                                'stun:stun2.l.google.com:19302',\n                            ],\n                        }]\n                }\n            };\n            try {\n                let id = uuidv4();\n                this.peer = new Peer(id, peerJsOptions);\n                return id;\n            } catch (error) {\n                console.error(error);\n            }\n        }\n    }\n\n    public async establishMediaCall(remotePeerId: string) {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n\n            const connection = this.peer.connect(remotePeerId);\n            connection.on('error', err => {\n                console.error(err);\n                this.snackBar.open(err, 'Close');\n            });\n\n            this.mediaCall = this.peer.call(remotePeerId, stream);\n            if (!this.mediaCall) {\n                let errorMessage = 'Unable to connect to remote peer';\n                this.snackBar.open(errorMessage, 'Close');\n                throw new Error(errorMessage);\n            }\n            this.localStreamBs.next(stream);\n            this.isCallStartedBs.next(true);\n\n            this.mediaCall.on('stream',\n                (remoteStream) => {\n                    this.remoteStreamBs.next(remoteStream);\n                });\n            this.mediaCall.on('error', err => {\n                this.snackBar.open(err, 'Close');\n                console.error(err);\n                this.isCallStartedBs.next(false);\n            });\n            this.mediaCall.on('close', () => this.onCallClose());\n        }\n        catch (ex) {\n            console.error(ex);\n            this.snackBar.open(ex, 'Close');\n            this.isCallStartedBs.next(false);\n        }\n    }\n\n    public async enableCallAnswer() {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n            this.localStreamBs.next(stream);\n            this.peer.on('call', async (call) => {\n    \n                this.mediaCall = call;\n                this.isCallStartedBs.next(true);\n    \n                this.mediaCall.answer(stream);\n                this.mediaCall.on('stream', (remoteStream) => {\n                    this.remoteStreamBs.next(remoteStream);\n                });\n                this.mediaCall.on('error', err => {\n                    this.snackBar.open(err, 'Close');\n                    this.isCallStartedBs.next(false);\n                    console.error(err);\n                });\n                this.mediaCall.on('close', () => this.onCallClose());\n            });            \n        }\n        catch (ex) {\n            console.error(ex);\n            this.snackBar.open(ex, 'Close');\n            this.isCallStartedBs.next(false);            \n        }\n    }\n\n    private onCallClose() {\n        this.remoteStreamBs?.value.getTracks().forEach(track => {\n            track.stop();\n        });\n        this.localStreamBs?.value.getTracks().forEach(track => {\n            track.stop();\n        });\n        this.snackBar.open('Call Ended', 'Close');\n    }\n\n    public closeMediaCall() {\n        this.mediaCall?.close();\n        if (!this.mediaCall) {\n            this.onCallClose()\n        }\n        this.isCallStartedBs.next(false);\n    }\n\n    public destroyPeer() {\n        this.mediaCall?.close();\n        this.peer?.disconnect();\n        this.peer?.destroy();\n    }\n\n}","import { Inject } from '@angular/core';\nimport { Component } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA} from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Component({\n    selector: 'app-call-info-dialog',\n    templateUrl: './callinfo-dialog.component.html',\n    styleUrls: ['./callinfo-dialog.component.scss']\n})\nexport class CallInfoDialogComponents {\n    constructor(\n        public dialogRef: MatDialogRef<CallInfoDialogComponents>,\n        @Inject(MAT_DIALOG_DATA) public data: DialogData,\n        private _snackBar: MatSnackBar\n    ) { }\n\n    public showCopiedSnackBar() {        \n        this._snackBar.open('Peer ID Copied!', 'Hurrah', {\n        duration: 1000,\n        horizontalPosition: 'center',\n        verticalPosition: 'top'\n      });\n    }\n}\n\nexport interface DialogData {\n    peerId?: string;\n    joinCall: boolean\n}","<h1 mat-dialog-title>Call Info</h1>\n<div mat-dialog-content>\n  <mat-form-field [cdkCopyToClipboard]=\"data.peerId\" (click)=\"showCopiedSnackBar()\">\n    <mat-label>{{ data.joinCall ? 'INSERT REMOTE ID' : 'CLICK TO COPY YOUR ID' }}</mat-label>\n    <input [disabled]=\"!data.joinCall\" matInput [(ngModel)]=\"data.peerId\">\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button mat-raised-button [mat-dialog-close]=\"data.peerId\">Ok</button>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}